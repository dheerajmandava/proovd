## If there's an error in the response, throw it
#if($ctx.error)
  $util.error($ctx.error.message, $ctx.error.type)
#end

## If there's an error field in the response, throw it
#if($ctx.result.error)
  $util.error($ctx.result.error)
#end

## If result is null, provide a meaningful error
#if($ctx.result == null)
  $util.error("Lambda resolver did not return a valid response. Check Lambda function logs.")
#end

## Otherwise, return the result
$util.toJson($ctx.result) 